<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>
        가위 바위 보 게임을 10번 하여 승률 출력
    </h1>

    <button type="button" id="btn">승률출력</button>
    <h3>
        10 game의 승률은 <span id="result"></span>% 입니다.
    </h3>

    <ol id="ol"></ol>
    <h3 id="h3"></h3>
    <script>
        // 가위바위보 게임
        // com = random / player = random
        // 0=가위, 1=바위, 2=보
        // 승률 계산 (승/ (10-무))*100 소수 2자리 까지 표현
        // 콘솔에 출력 com / player (승/패/무)
        
        document.getElementById('btn').addEventListener('click', ()=>{
            let win=0;
            let draw=0;
            let lose=0;
            const play = ['가위', '바위', '보'];

            let str='';

            for(let i=0; i<10; i++){
                let player = randomNumber();
                let com = randomNumber();
                let result= getWinner(player, com);
                console.log(`player: ${play[player]} / com: ${play[com]} => ${result}`);
                str += `<li> player: ${play[player]} / com: ${play[com]} => ${result} </li>`;
                if(result =='win'){
                    win++;
                }else if(result == 'draw'){
                    draw++;
                }else{
                    lose++;
                }
            }
            console.log(`win:${win} / draw:${draw} / lose:${lose}`);
            document.getElementById('result').innerText =
                ((win / (10-draw))*100).toFixed(2);

            document.getElementById('ol').innerHTML = str;
            document.getElementById('h3').innerHTML = `win:${win} / draw:${draw} / lose:${lose}`;
        })
        // 랜덤값 리턴 함수
        function randomNumber() {
            return Math.floor(Math.random()*3);
        }

        //win draw lose 리턴 하는 함수
        function getWinner(userChoice, comChoice){
            if(userChoice === comChoice){
                return 'draw';
            }else if(
                (userChoice == 0 && comChoice == 2) ||
                (userChoice == 1 && comChoice == 0) ||
                (userChoice == 2 && comChoice == 1)
            ){
                return 'win';
            }else {
                return 'lose';
            }
        }



        // function game() {
        //     const rsp = ['가위', '바위', '보'];
        //     let win=0;
        //     let draw=0;
        //     let defeat=0;
    
        //     let com;
        //     let user;
    
        //     for(let i=0; i<10; i++){
        //         com = Math.floor(Math.random()*3);
        //         user = Math.floor(Math.random()*3);
        //         console.log(`${i+1}. com:${rsp[com]} / player:${rsp[user]}`);
        //         if(user == com){
        //             draw++;
        //             console.log('(무)');
        //         }else if(user-com==1 || user-com==-2){
        //             win++;
        //             console.log('(승)');
        //         }else{
        //             defeat++;
        //             console.log('(패)');
        //         }
        //     }
        //     // 승률 계산
        //     let rate = (win / (10-draw) * 100).toFixed(2);

        //     document.getElementById('result').innerHTML=rate;
        // }
        // document.getElementById('btn').addEventListener('click', game);

    </script>
</body>
</html>