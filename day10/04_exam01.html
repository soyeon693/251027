<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        button img{
            height: 200px;
            width: 200px;
        }
    </style>
</head>
<body>
    <!-- 
        가위바위보 이미지를 버튼채그에 넣어 선택하여 가위바위보의 승률 계산
    -->

    <button ><img id="0" src="../math_img_1.jpg" alt=""></button>
    <button ><img id="1" src="../math_img_2.jpg" alt=""></button>
    <button ><img id="2" src="../math_img_3.jpg" alt=""></button>
    <!-- 
        player:가위 / com: 바위 player가 졌습니다.
        현재 전적
        승: / 무: / 패:
        승률: %
    -->

    <h1 id="result"></h1>

    <script>

        document.addEventListener('click', (e)=>{
            // 모든 화면에 이벤트가 달림
            // 동적으로 생기는 모든 객체에 이벤트 추가 가능
            console.log(e.target.id);
            // id가 존재할 때만 작동
            if(e.target.id){
                play(e.target.id);
            }
        })

        // 전역변수
        let win=0;
        let draw=0;
        let lose=0;

        // const resultCount = {
        //     win:0,
        //     draw:0,
        //     lose:0
        // }
        function play(player){
            let rsp=['가위', '바위', '보']
            let com = Math.floor(Math.random()*3);
            let str = `player:${rsp[player]} / com:${rsp[com]} player가 `;

            if(player == com){
                    draw++;
                    str += '비겼습니다.';
                }else if(player-com==1 || player-com==-2){
                    win++;
                    str += '이겼습니다.';
                }else{
                    lose++;
                    str += '졌습니다.';
                }
            let rate = (win+lose==0) ? 0 : (win / (win+lose) * 100).toFixed(2);

            str += '\n현재전적\n';
            str += `승:${win} / 무:${draw} / 패:${lose}\n`;
            str += `승률: ${rate}%`;

            document.getElementById('result').innerText =str;
        }
        
    </script>
</body>
</html>